#!/usr/bin/env sh

# Block pushes if local docs/issues mirror is out of date vs GitHub.
# Requires `gh` to be authenticated; skip if gh missing.

if ! command -v gh >/dev/null 2>&1; then
  echo "[pre-push] gh CLI not found; skipping issues mirror check" >&2
  exit 0
fi

if command -v pnpm >/dev/null 2>&1; then
  pnpm run issues:mirror:check || {
    echo "[pre-push] GitHub issues changed. Run 'pnpm run issues:mirror' and commit docs/issues updates." >&2
    exit 1
  }
fi

exit 0
